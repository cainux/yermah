<html>
  <head>
    <style type="text/css">
      body, h1, p, a, div { margin: 0; padding: 0; }
      
      body  { font-family: 'Lucida Grande', Verdana, Arial, Helvetica, sans-serif; }
      h1    { font-size: 14px; }
      p     { font-size: 12px; margin: 5px 0; }
      a     { font-size: 11px; text-decoration: none; }
      a:visited { color: blue; }
      
      .message  { padding: 3px 6px; }
    </style>
    <script>
      var bg = chrome.extension.getBackgroundPage();
      var ym = bg.ym;
      var message = ym.flash[location.hash];
      var notification = message.notification;
      var timeoutId = 0;
      
      delete ym.flash[location.hash];
      
      var init = function() {
        var image = document.getElementById("image");
        var title = document.getElementById("title");
        var body = document.getElementById("body");
        var viewLink = document.getElementById("viewLink");
        
        image.src = message.sender_mugshot;
        title.innerText = message.sender_fullName;
        body.innerText = message.body.plain;
        viewLink.href = message.web_url;
        
        timeoutId = setTimeout(function() { notification.cancel(); }, ym.notificationTimeout);
        document.body.addEventListener("mouseover", function() { clearTimeout(timeoutId); }, false);
      }
    </script>
  </head>
  <body onload="init()">
    <img id="image" align="right" />
    <div class="message">
      <h1 id="title"></h1>
      <p id="body"></p>
      <a id="viewLink" href="#" target="_top">view message</a>
    </div>
  </body>
</html>